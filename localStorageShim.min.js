var options={poll_time:200},localStorageShim=function(t){var e,r="__localStorageShim",n="pairs",o="localStorageShim Error: ";const a=[];try{if(localStorage.setItem("a",4),4!=localStorage.getItem("a"))throw 1;e=function(){this.setItem=function(t,e){return localStorage.setItem(t,e)},this.getItem=function(t){return localStorage.getItem(t)}}}catch(c){e=function(){var e,c,i=indexedDB.open(r,4),u={},s=function(){e=db.transaction(n).objectStore(n),e.openCursor().onsuccess=function(t){var e,r=t.target.result;r&&(e=r.value,u[e.k]=[e.v,r.key],r["continue"]())}},l=function(t,r){t+="",r+="",u[t][0]!==r&&(u[t]=u[t]||[],u[t][0]=r,clearInterval(c),e=db.transaction(n,"readwrite").objectStore(n),e=e.put({k:t,v:r},u[t][1]),e.onsuccess=d)},d=function(){s(),c=setInterval(s,t.poll_time)};i.onupgradeneeded=function(t){var e=t.target.result,r=t.target.transaction.objectStore(n)||e.createObjectStore(n,{autoIncrement:!0});try{r.createIndex("k","k",{unique:!0}),r.createIndex("v","v",{unique:!1})}catch(o){}r.transaction.oncomplete=function(t){var r=e.transaction(n,"readwrite").objectStore(n);for(var o in a)r.add(a[o])}},i.onsuccess=function(t){db=t.target.result,e=db.transaction(n,"readwrite").objectStore(n),d()},this.getItem=function(t){if(!t)throw o+"one arguments required";return u[t+""]?u[t+""][0]:void 0},this.setItem=function(t,e){if(!t||!e)throw o+"two arguments required";l(t,e)}}}return new e}(options);